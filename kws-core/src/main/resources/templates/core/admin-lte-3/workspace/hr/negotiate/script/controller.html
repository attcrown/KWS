<div th:replace="core/admin-lte-3/workspace/hr/negotiate/script/date-entry-controller"></div>

<script th:inline="javascript">
    app.controller("NegotiateController", ["$scope", "$http", ($scope, $http) => {
       
        $scope.isLoading = false;
        $scope.criteria = {};
        $scope.mode = "list"; // ["list", "addDate" , ""]
        $scope.read = "close";
        $scope.selectedCandidateProfile;
        //$scope.candidates = [];
        $scope.category = "";
        
        $scope.candidates = [
            { id: "1", name: 'arin', surname: 'test1', position: "Developer", day: "24/06/23",startTime : "8 PM",endTime :"9 PM", negotiate_status: "wait" },
            { id: "2", name: 'peet', surname: 'terst2', position: "Developer",  day: "24/06/23",startTime : "8 PM",endTime :"9 PM", negotiate_status: "wait" },
            { id: "57", name: 'arin', surname: 'test1', position: "Developer",  day: "24/06/23",startTime : "8 PM",endTime :"9 PM", negotiate_status: "success" },
            { id: "42", name: 'arin', surname: 'test2', position: "Developer",  day: null,startTime : null,endTime :null, negotiate_status: "null" },
            { id: "52", name: 'arin', surname: 'test2', position: "Developer",  day: null,startTime : null,endTime :null,  negotiate_status: "null" },
            { id: "5", name: 'arin', surname: 'test2', position: "Developer",  day: null,startTime : null,endTime :null,  negotiate_status: "null" },
            { id: "3", name: 'arin', surname: 'test2', position: "Developer",  day: null,startTime : null,endTime :null,  negotiate_status: "null" },
            { id: "427", name: 'arin', surname: 'test1', position: "Developer",  day: "24/06/23",startTime : "8 PM",endTime :"9 PM", negotiate_status: "failed" },


        ];

        $scope.init = function(){
            useEntryController($scope, $http);
            $('.select2').select2({ theme: 'bootstrap4' });            
        };

        $scope.sortCandidatesById = function (candidate) {
            return parseInt(candidate.id);
        };

        $scope.setDatetime = function (candidate) {
            candidate.datetime = new Date();
        };

        $scope.goSetDateNegotiate = function (candidate) {
            $scope.selectedCandidateProfile = candidate;
            $scope.mode = "addDate";
          
        }

        $scope.toListMode = function() {
            $scope.mode = 'list';
        };

        $scope.toDetailMode = function(candidate) {
            $scope.selectedCandidateProfile = candidate;
            $scope.mode = 'detail';
        };

        $scope.toNegotiateMode = function(candidate) {
        $scope.selectedCandidateProfile = candidate;
          $scope.mode = 'negotiate';
      };

        $scope.setDateNegotiate = function (candidate) {

            candidate.datetime = "";
        }

        $scope.resetForm = function() {
            setTimeout(() => {
                $scope.dateForm.$submitted = false;

                $scope.dateForm.day.$setUntouched();
                $scope.dateForm.day.$setPristine();

                $scope.dateForm.startTime.$setUntouched();
                $scope.dateForm.startTime.$setPristine();

                $scope.$apply();
                
            }, 0);
        };


    }]);
</script>