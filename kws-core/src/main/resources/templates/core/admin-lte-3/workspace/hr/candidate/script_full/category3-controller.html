<script th:inline="javascript">
  function useEntryController($scope, $http) {
    $scope.isShowFirstNameError = useIsShowError($scope, $http, "firstName");
    $scope.requestSave = useRequestSave($scope, $http);
    $scope.verify = useVerify($scope, $http);
  }

  function useIsShowError($scope, $http, fieldName) {
    return () => {
        if ($scope.employeeForm[fieldName]) {
            return ($scope.employeeForm.$submitted || $scope.employeeForm[fieldName].$dirty) && $scope.employeeForm[fieldName].$invalid;
        }
        return false;
    };
  }

  function useVerify($scope, $http) {
    return () => {
      return $scope.employeeForm.$valid;
    };
  }

  function useRequestSave($scope, $http) {
    return () => {
      console.log("### FishsixTecherProfileController.requestSave ###");
      $scope.employeeForm.$submitted = true;

      if ($scope.verify()) {
        const options = {
          title:
            $scope.entryMode === "add"
              ? "ยืนยันการบันทึกข้อมูลครู ?"
              : "ยืนยันการแก้ไขข้อมูลครู",
          text: 'กดปุ่ม "ตกลง" เพื่อยืนยัน',
          icon: "warning",
          buttons: ["ยกเลิก", "ตกลง"],
          dangerMode: true,
        };

        const handler = (confirm) => {
          if (confirm) {
            // $scope.setupTeacherSubjectMapper($scope.selectedTeacherProfile);
            console.log($scope.selectedEmployeeProfile);
          }
        };

        swal(options).then(handler);
      } else {
        swal("ข้อมูลไม่ครบถ้วน", "กรุณาระบุข้อมูลให้ครบถ้วน", "error");
      }
    };
  }
</script>
