<script th:inline="javascript">
    function useEntryController($scope, $http)
    {
        $scope.requestApprove = useRequestApprove($scope, $http);
        $scope.requestReject = useRequestReject($scope, $http);
        $scope.verify = useVerify($scope, $http);

        $scope.isShowEmailError = useIsShowEmailError($scope, $http);
        $scope.isShowPasswordError = useIsShowPasswordError($scope, $http);

        $scope.isShowFirstNameError = useIsShowFirstNameError($scope, $http);
        $scope.isShowLastNameError = useIsShowLastNameError($scope, $http);
        $scope.isShowNickNameError = useIsShowNickNameError($scope, $http);
        $scope.isShowMobileNoError = useIsShowMobileNoError($scope, $http);
        $scope.isShowRegistAddressError = useIsShowRegistAddressError($scope, $http);
        $scope.isShowContactAddressError = useIsShowContactAddressError($scope, $http);
        $scope.isShowIdcardNoError = useIsShowIdcardNoError($scope, $http);
        $scope.isShowIdcardFileError = useIsShowIdcardFileError($scope, $http);
        $scope.isShowOccupationError = useIsShowOccupationError($scope, $http);

        $scope.isShowHireTypeError = useIsShowHireTypeError($scope, $http);
        $scope.isShowWorktimeTypeError = useIsShowWorktimeTypeError($scope, $http);
        $scope.isShowStartWorkDateError = useIsShowStartWorkDateError($scope, $http);
        $scope.isShowWorkHourMonthError = useIsShowWorkHourMonthError($scope, $http);
        $scope.isShowSalaryError = useIsShowSalaryError($scope, $http);
        $scope.isShowWageHourRateError = useIsShowWageHourRateError($scope, $http);
        $scope.isShowBankAccountNameError = useIsShowBankAccountNameError($scope, $http);
        $scope.isShowBankAccountNoError = useIsShowBankAccountNoError($scope, $http);

        $scope.isShowEducationSchoolError = useIsShowEducationSchoolError($scope, $http);
        $scope.isShowEducationFacultyError = useIsShowEducationFacultyError($scope, $http);
        $scope.isShowEducationMajorError = useIsShowEducationMajorError($scope, $http);
        $scope.isShowSubjectsError = useIsShowSubjectsError($scope, $http);
    }

    function useRequestApprove($scope, $http)
    {
        return () => {
            console.log("### FishsixTeacherNewRegistrationController.requestApprove ###");

            $scope.userInfoForm.$submitted = true;
            $scope.generalInfoForm.$submitted = true
            $scope.employInfoForm.$submitted = true;
            $scope.educationInfoForm.$submitted = true;

            if($scope.verify()) {
                const options = {
                    title: "ยืนยันการ Approve การลงทะเบียนข้อมูลครู ?",
                    text: 'กดปุ่ม "ตกลง" เพื่อยืนยัน',
                    icon: "warning",
                    buttons: ["ยกเลิก", "ตกลง"],
                    dangerMode: true
                };

                const handler = (confirm) => {
                    if (confirm) {
                        $scope.approveTeacherRegister($scope.selectedTeacherRegister);
                    }
                };

                swal(options).then(handler);
            } else {
                swal("ข้อมูลไม่ครบถ้วน", "กรุณาระบุข้อมูลให้ครบถ้วน", "error");
            }
        };
    }

    function useRequestReject($scope, $http)
    {
        return () => {
            console.log("### FishsixTeacherNewRegistrationController.requestReject ###");

            $scope.userInfoForm.$submitted = true;
            $scope.generalInfoForm.$submitted = true
            $scope.employInfoForm.$submitted = true;
            $scope.educationInfoForm.$submitted = true;

            if($scope.verify()) {
                const options = {
                    title: "ยืนยันการ Reject การลงทะเบียนข้อมูลครู ?",
                    text: 'กดปุ่ม "ตกลง" เพื่อยืนยัน',
                    icon: "warning",
                    buttons: ["ยกเลิก", "ตกลง"],
                    dangerMode: true
                };

                const handler = (confirm) => {
                    if (confirm) {
                        $scope.rejectTeacherRegister($scope.selectedTeacherRegister);
                    }
                };

                swal(options).then(handler);
            } else {
                swal("ข้อมูลไม่ครบถ้วน", "กรุณาระบุข้อมูลให้ครบถ้วน", "error");
            }
        };
    }

    function useVerify($scope, $http)
    {
        return () => {
            return $scope.userInfoForm.$valid && $scope.generalInfoForm.$valid && $scope.employInfoForm.$valid && $scope.educationInfoForm.$valid;
        };
    }

    // ****************************** validate ****************************** //
    function useIsShowEmailError($scope, $http) 
    {
        return () => {
            return ($scope.userInfoForm.$submitted || $scope.userInfoForm.email.$dirty) && $scope.userInfoForm.email.$invalid;
        };
    }

    function useIsShowPasswordError($scope, $http) 
    {
        return () => {
            return ($scope.userInfoForm.$submitted || $scope.userInfoForm.password.$dirty) && $scope.userInfoForm.password.$invalid;
        };
    }


    
    function useIsShowFirstNameError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.firstName.$dirty) && $scope.generalInfoForm.firstName.$invalid;
        };
    }

    function useIsShowLastNameError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.lastName.$dirty) && $scope.generalInfoForm.lastName.$invalid;
        };
    }

    function useIsShowNickNameError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.nickName.$dirty) && $scope.generalInfoForm.nickName.$invalid;
        };
    }

    function useIsShowMobileNoError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.mobileNo.$dirty) && $scope.generalInfoForm.mobileNo.$invalid;
        };
    }

    function useIsShowRegistAddressError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.registAddress.$dirty) && $scope.generalInfoForm.registAddress.$invalid;
        };
    }

    function useIsShowContactAddressError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.contactAddress.$dirty) && $scope.generalInfoForm.contactAddress.$invalid;
        };
    }

    function useIsShowIdcardNoError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.idcardNo.$dirty) && $scope.generalInfoForm.idcardNo.$invalid;
        };
    }

    function useIsShowIdcardFileError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted) && !$scope.selectedTeacherRegister.idcardFileBase64;
        };
    }

    function useIsShowOccupationError($scope, $http) 
    {
        return () => {
            return ($scope.generalInfoForm.$submitted || $scope.generalInfoForm.occupation.$dirty) && $scope.generalInfoForm.occupation.$invalid;
        };
    }



    function useIsShowHireTypeError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted) && !$scope.selectedTeacherRegister.hireTypeId;
        };
    }

    function useIsShowWorktimeTypeError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted) && !$scope.selectedTeacherRegister.worktimeTypeId;
        };
    }

    function useIsShowStartWorkDateError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted || $scope.employInfoForm.startWorkDate.$dirty) && $scope.employInfoForm.startWorkDate.$invalid;
        };
    }

    function useIsShowWorkHourMonthError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted || $scope.employInfoForm.workHourMonth.$dirty) && $scope.employInfoForm.workHourMonth.$invalid;
        };
    }

    function useIsShowSalaryError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted || $scope.employInfoForm.salary.$dirty) && $scope.employInfoForm.salary.$invalid;
        };
    }

    function useIsShowWageHourRateError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted || $scope.employInfoForm.wageHourRate.$dirty) && $scope.employInfoForm.wageHourRate.$invalid;
        };
    }

    function useIsShowBankAccountNameError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted || $scope.employInfoForm.bankAccountName.$dirty) && $scope.employInfoForm.bankAccountName.$invalid;
        };
    }

    function useIsShowBankAccountNoError($scope, $http) 
    {
        return () => {
            return ($scope.employInfoForm.$submitted || $scope.employInfoForm.bankAccountNo.$dirty) && $scope.employInfoForm.bankAccountNo.$invalid;
        };
    }

    

    function useIsShowEducationSchoolError($scope, $http) 
    {
        return () => {
            return ($scope.educationInfoForm.$submitted || $scope.educationInfoForm.educationSchool.$dirty) && $scope.educationInfoForm.educationSchool.$invalid;
        };
    }

    function useIsShowEducationFacultyError($scope, $http) 
    {
        return () => {
            return ($scope.educationInfoForm.$submitted || $scope.educationInfoForm.educationFaculty.$dirty) && $scope.educationInfoForm.educationFaculty.$invalid;
        };
    }

    function useIsShowEducationMajorError($scope, $http) 
    {
        return () => {
            return ($scope.educationInfoForm.$submitted || $scope.educationInfoForm.educationMajor.$dirty) && $scope.educationInfoForm.educationMajor.$invalid;
        };
    }

    function useIsShowSubjectsError($scope, $http) 
    {
        return () => {
            return ($scope.educationInfoForm.$submitted) && $scope.selectedTeacherRegister.subjectIds.length === 0;
        };
    }
    // ****************************** validate ****************************** //
</script>